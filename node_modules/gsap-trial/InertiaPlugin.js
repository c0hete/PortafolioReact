/*!
 * InertiaPlugin 3.9.0
 * https://greensock.com
 * 
 * @license Copyright 2021, GreenSock. All rights reserved.
 * *** DO NOT DEPLOY THIS FILE ***
 * This is a trial version that only works locally and on domains like codepen.io and codesandbox.io.
 * Loading it on an unauthorized domain violates the license and will cause a redirect.
 * Get the unrestricted file by joining Club GreenSock at https://greensock.com/club
 * @author: Jack Doyle, jack@greensock.com
 */

let t,e,i,r,n,o,s,a,l,c=()=>t||"undefined"!=typeof window&&(t=window.gsap),g={},p=t=>l(t).id,u=t=>g[p("string"==typeof t?i(t)[0]:t)],h=t=>{let e,i=n;if(t-s>=.05)for(a=s,s=t;i;)e=i.g(i.t,i.p),(e!==i.v1||t-i.t1>.2)&&(i.v2=i.v1,i.v1=e,i.t2=i.t1,i.t1=t),i=i._next},d={deg:360,rad:2*Math.PI},f=()=>{t=c(),t&&(i=t.utils.toArray,r=t.utils.getUnit,l=t.core.getCache,o=t.ticker,e=1)};class m{constructor(t,e,i,n){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=d[i||r(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=o.time,n&&(this._next=n,n._prev=this)}}class v{constructor(t,r){e||f(),this.target=i(t)[0],g[p(this.target)]=this,this._props={},r&&this.add(r)}static register(e){t=e,f()}get(t,e){let i,r,n,s=this._props[t]||console.warn("Not tracking "+t+" velocity.");return i=parseFloat(e?s.v1:s.g(s.t,s.p)),r=i-parseFloat(s.v2),n=s.rCap,n&&(r%=n,r!==r%(n/2)&&(r=r<0?r+n:r-n)),a=r/((e?s.t1:o.time)-s.t2),Math.round(1e4*a)/1e4;var a}getAll(){let t,e={},i=this._props;for(t in i)e[t]=this.get(t);return e}isTracking(t){return t in this._props}add(t,e){t in this._props||(n||(o.add(h),s=a=o.time),n=this._props[t]=new m(this.target,t,e,n))}remove(t){let e,i,r=this._props[t];r&&(e=r._prev,i=r._next,e&&(e._next=i),i?i._prev=e:n===r&&(o.remove(h),n=0),delete this._props[t])}kill(t){for(let t in this._props)this.remove(t);t||delete g[p(this.target)]}static track(t,r,n){e||f();let o,s,a=[],l=i(t),c=r.split(","),g=(n||"").split(","),p=l.length;for(;p--;){for(o=u(l[p])||new v(l[p]),s=c.length;s--;)o.add(c[s],g[s]||g[0]);a.push(o)}return a}static untrack(t,e){let r=(e||"").split(",");i(t).forEach(t=>{let e=u(t);e&&(r.length?r.forEach(t=>e.remove(t)):e.kill(1))})}static isTracking(t,e){let i=u(t);return i&&i.isTracking(e)}static getVelocity(t,e){let i=u(t);return i&&i.isTracking(e)?i.get(e):console.warn("Not tracking velocity of "+e)}}v.getByTarget=u,c()&&t.registerPlugin(v);let w,y,_,x,k,T,F,P,N,O,M,b,A=v.getByTarget,C=()=>w||"undefined"!=typeof window&&(w=window.gsap)&&w.registerPlugin&&w,E=t=>"number"==typeof t,I=t=>"object"==typeof t,B=t=>"function"==typeof t,R=function(){return String.fromCharCode.apply(null,arguments)},W=R(103,114,101,101,110,115,111,99,107,46,99,111,109),j=function(t){var e="undefined"!=typeof window,i=0===(e?window.location.href:"").indexOf(R(102,105,108,101,58,47,47))||-1!==t.indexOf(R(108,111,99,97,108,104,111,115,116))||-1!==t.indexOf(R(49,50,55,46,48,32,48,46,49)),r=[W,R(99,111,100,101,112,101,110,46,105,111),R(99,111,100,101,112,101,110,46,112,108,117,109,98,105,110,103),R(99,111,100,101,112,101,110,46,100,101,118),R(99,111,100,101,112,101,110,46,97,112,112),R(99,111,100,101,112,101,110,46,119,101,98,115,105,116,101),R(112,101,110,115,46,99,108,111,117,100),R(99,115,115,45,116,114,105,99,107,115,46,99,111,109),R(99,100,112,110,46,105,111),R(112,101,110,115,46,105,111),R(103,97,110,110,111,110,46,116,118),R(99,111,100,101,99,97,110,121,111,110,46,110,101,116),R(116,104,101,109,101,102,111,114,101,115,116,46,110,101,116),R(99,101,114,101,98,114,97,120,46,99,111,46,117,107),R(116,121,109,112,97,110,117,115,46,110,101,116),R(116,119,101,101,110,109,97,120,46,99,111,109),R(116,119,101,101,110,108,105,116,101,46,99,111,109),R(112,108,110,107,114,46,99,111),R(104,111,116,106,97,114,46,99,111,109),R(119,101,98,112,97,99,107,98,105,110,46,99,111,109),R(97,114,99,104,105,118,101,46,111,114,103),R(99,111,100,101,115,97,110,100,98,111,120,46,105,111),R(99,115,98,46,97,112,112),R(115,116,97,99,107,98,108,105,116,122,46,99,111,109),R(115,116,97,99,107,98,108,105,116,122,46,105,111),R(99,111,100,105,101,114,46,105,111),R(109,111,116,105,111,110,116,114,105,99,107,115,46,99,111,109),R(115,116,97,99,107,111,118,101,114,102,108,111,119,46,99,111,109),R(115,116,97,99,107,101,120,99,104,97,110,103,101,46,99,111,109),R(106,115,102,105,100,100,108,101,46,110,101,116)],n=r.length;for(setTimeout((function(){e&&window.console&&!window._gsapWarned&&"object"==typeof w&&!1!==w.config().trialWarn&&(console.log(R(37,99,87,97,114,110,105,110,103),R(102,111,110,116,45,115,105,122,101,58,51,48,112,120,59,99,111,108,111,114,58,114,101,100,59)),console.log(R(65,32,116,114,105,97,108,32,118,101,114,115,105,111,110,32,111,102,32)+"InertiaPlugin"+R(32,105,115,32,108,111,97,100,101,100,32,116,104,97,116,32,111,110,108,121,32,119,111,114,107,115,32,108,111,99,97,108,108,121,32,97,110,100,32,111,110,32,100,111,109,97,105,110,115,32,108,105,107,101,32,99,111,100,101,112,101,110,46,105,111,32,97,110,100,32,99,111,100,101,115,97,110,100,98,111,120,46,105,111,46,32,42,42,42,32,68,79,32,78,79,84,32,68,69,80,76,79,89,32,84,72,73,83,32,70,73,76,69,32,42,42,42,32,76,111,97,100,105,110,103,32,105,116,32,111,110,32,97,110,32,117,110,97,117,116,104,111,114,105,122,101,100,32,115,105,116,101,32,118,105,111,108,97,116,101,115,32,116,104,101,32,108,105,99,101,110,115,101,32,97,110,100,32,119,105,108,108,32,99,97,117,115,101,32,97,32,114,101,100,105,114,101,99,116,46,32,80,108,101,97,115,101,32,106,111,105,110,32,67,108,117,98,32,71,114,101,101,110,83,111,99,107,32,116,111,32,103,101,116,32,102,117,108,108,32,97,99,99,101,115,115,32,116,111,32,116,104,101,32,98,111,110,117,115,32,112,108,117,103,105,110,115,32,116,104,97,116,32,98,111,111,115,116,32,121,111,117,114,32,97,110,105,109,97,116,105,111,110,32,115,117,112,101,114,112,111,119,101,114,115,46,32,68,105,115,97,98,108,101,32,116,104,105,115,32,119,97,114,110,105,110,103,32,119,105,116,104,32,103,115,97,112,46,99,111,110,102,105,103,40,123,116,114,105,97,108,87,97,114,110,58,32,102,97,108,115,101,125,41,59)),console.log(R(37,99,71,101,116,32,117,110,114,101,115,116,114,105,99,116,101,100,32,102,105,108,101,115,32,97,116,32,104,116,116,112,115,58,47,47,103,114,101,101,110,115,111,99,107,46,99,111,109,47,99,108,117,98),R(102,111,110,116,45,115,105,122,101,58,49,54,112,120,59,99,111,108,111,114,58,35,52,101,57,56,49,53)),window._gsapWarned=1)}),50);--n>-1;)if(-1!==t.indexOf(r[n]))return!0;return i||!setTimeout((function(){e&&(window.location.href=R(104,116,116,112,115,58,47,47)+W+R(47,114,101,113,117,105,114,101,115,45,109,101,109,98,101,114,115,104,105,112,47)+"?plugin=InertiaPlugin&source=trial")}),3e3)}("undefined"!=typeof window?window.location.host:""),U=Array.isArray,V=t=>t,q=1e10,S=(t,e,i)=>{for(let r in e)r in t||r===i||(t[r]=e[r]);return t},z=t=>{let e,i,r={};for(e in t)r[e]=I(i=t[e])&&!U(i)?z(i):i;return r},D=(t,e,i,r,n)=>{let o,s,a,l,c=e.length,g=0,p=q;if(I(t)){for(;c--;){for(a in o=e[c],s=0,t)l=o[a]-t[a],s+=l*l;s<p&&(g=c,p=s)}if((n||q)<q&&n<Math.sqrt(p))return t}else for(;c--;)o=e[c],s=o-t,s<0&&(s=-s),s<p&&o>=r&&o<=i&&(g=c,p=s);return e[g]},G=(t,e,i,r,n,o,s)=>{if("auto"===t.end)return t;let a,l,c=t.end;if(i=isNaN(i)?q:i,r=isNaN(r)?-q:r,I(e)){if(a=e.calculated?e:(B(c)?c(e,s):D(e,c,i,r,o))||e,!e.calculated){for(l in a)e[l]=a[l];e.calculated=!0}a=a[n]}else a=B(c)?c(e,s):U(c)?D(e,c,i,r,o):parseFloat(c);return a>i?a=i:a<r&&(a=r),{max:a,min:a,unitFactor:t.unitFactor}},H=(t,e,i)=>isNaN(t[e])?i:+t[e],J=(t,e)=>.05*e*t/O,K=(t,e,i)=>Math.abs((e-t)*O/i/.05),L={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},Q=(t,e,i,r)=>{if(e.linkedProps){let n,o,s,a,l,c,g=e.linkedProps.split(","),p={};for(n=0;n<g.length;n++)o=g[n],s=e[o],s&&(E(s.velocity)?a=s.velocity:(l=l||A(t),a=l&&l.isTracking(o)?l.get(o):0),c=Math.abs(a/H(s,"resistance",r)),p[o]=parseFloat(i(t,o))+J(a,c));return p}},X=()=>{w=C(),w&&(_=w.parseEase,x=w.utils.toArray,F=w.utils.getUnit,N=w.core.getCache,M=w.utils.clamp,k=_("power3"),O=k(.05),P=w.core.PropTween,w.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),T=w.config(),w.registerPlugin(v),y=1)};const Y={version:"3.9.0",name:"inertia",register(t){w=t,X()},init(t,e,i,r,n){y||X();let o=A(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.target=t,this.tween=i,b=e;let s,a,l,c,g,p,u,h,d,f=t._gsap,m=f.get,v=e.duration,w=I(v),_=e.preventOvershoot||w&&0===v.overshoot,k=H(e,"resistance",T.resistance),O=E(v)?v:((t,e,i=10,r=.2,n=1,o=0)=>{if("string"==typeof t&&(t=x(t)[0]),!t)return 0;let s,a,l,c,g,p,u,h,d,f,m=0,v=q,w=e.inertia||e,y=N(t).get,_=H(w,"resistance",T.resistance);for(s in f=Q(t,w,y,_),w)L[s]||(a=w[s],I(a)||(h=h||A(t),h&&h.isTracking(s)?a=E(a)?{velocity:a}:{velocity:h.get(s)}:(c=+a||0,l=Math.abs(c/_))),I(a)&&(E(a.velocity)?c=a.velocity:(h=h||A(t),c=h&&h.isTracking(s)?h.get(s):0),l=M(r,i,Math.abs(c/H(a,"resistance",_))),g=parseFloat(y(t,s))||0,p=g+J(c,l),"end"in a&&(a=G(a,f&&s in f?f:p,a.max,a.min,s,w.radius,c),o&&(b===e&&(b=w=z(e)),w[s]=S(a,w[s],"end"))),"max"in a&&p>+a.max+1e-10?(d=a.unitFactor||T.unitFactors[s]||1,u=g>a.max&&a.min!==a.max||c*d>-15&&c*d<45?r+.1*(i-r):K(g,a.max,c),u+n<v&&(v=u+n)):"min"in a&&p<+a.min-1e-10&&(d=a.unitFactor||T.unitFactors[s]||1,u=g<a.min&&a.min!==a.max||c*d>-45&&c*d<15?r+.1*(i-r):K(g,a.min,c),u+n<v&&(v=u+n)),u>m&&(m=u)),l>m&&(m=l));return m>v&&(m=v),m>i?i:m<r?r:m})(t,e,w&&v.max||10,w&&v.min||.2,w&&"overshoot"in v?+v.overshoot:_?0:1,!0);for(s in e=b,b=0,d=Q(t,e,m,k),e)L[s]||(a=e[s],B(a)&&(a=a(r,t,n)),E(a)?g=a:I(a)&&!isNaN(a.velocity)?g=+a.velocity:o&&o.isTracking(s)?g=o.get(s):console.warn("ERROR: No velocity was defined for "+t+" property: "+s),p=J(g,O),h=0,l=m(t,s),c=F(l),l=parseFloat(l),I(a)&&(u=l+p,"end"in a&&(a=G(a,d&&s in d?d:u,a.max,a.min,s,e.radius,g)),"max"in a&&+a.max<u?_||a.preventOvershoot?p=a.max-l:h=a.max-l-p:"min"in a&&+a.min>u&&(_||a.preventOvershoot?p=a.min-l:h=a.min-l-p)),this._props.push(s),this._pt=new P(this._pt,t,s,l,0,V,0,f.set(t,s,this)),this._pt.u=c||0,this._pt.c1=p,this._pt.c2=h);return i.duration(O),j},render(t,e){let i=e._pt;for(t=k(e.tween._time/e.tween._dur);i;)i.set(i.t,i.p,(r=i.s+i.c1*t+i.c2*t*t,Math.round(1e4*r)/1e4+i.u),i.d,t),i=i._next;var r}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(t=>Y[t]=v[t]),C()&&w.registerPlugin(Y);export default Y;export{Y as InertiaPlugin,v as VelocityTracker};
