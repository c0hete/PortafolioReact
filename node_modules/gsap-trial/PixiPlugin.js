/*!
 * PixiPlugin 3.9.0
 * https://greensock.com
 * 
 * @license Copyright 2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

let t,r,i,e,o,s,l,n,a,u,h=()=>"undefined"!=typeof window,c=()=>t||h()&&(t=window.gsap)&&t.registerPlugin&&t,p=t=>"function"==typeof t,g=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],d=.212671,f=.71516,b=.072169,x=(t,r)=>{let i,e,o=[],s=0,l=0;for(i=0;i<4;i++){for(e=0;e<5;e++)l=4===e?t[s+4]:0,o[s+e]=t[s]*r[e]+t[s+1]*r[e+5]+t[s+2]*r[e+10]+t[s+3]*r[e+15]+l;s+=5}return o},m=(t,r)=>{let i=1-r,e=i*d,o=i*f,s=i*b;return x([e+r,o,s,0,0,e,o+r,s,0,0,e,o,s+r,0,0,0,0,0,1,0],t)},P=(t,r,e)=>{let o=i(r),s=o[0]/255,l=o[1]/255,n=o[2]/255,a=1-e;return x([a+e*s*d,e*s*f,e*s*b,0,0,e*l*d,a+e*l*f,e*l*b,0,0,e*n*d,e*n*f,a+e*n*b,0,0,0,0,0,1,0],t)},w=(t,r)=>{r*=Math.PI/180;let i=Math.cos(r),e=Math.sin(r);return x([d+i*(1-d)+e*-d,f+i*-f+e*-f,b+i*-b+e*(1-b),0,0,d+i*-d+.143*e,f+.28484*i+.14*e,b+i*-b+-.283*e,0,0,d+i*-d+-.787329*e,f+i*-f+e*f,b+i*(1-b)+e*b,0,0,0,0,0,1,0,0,0,0,0,1],t)},z=(t,r)=>x([r,0,0,0,.5*(1-r),0,r,0,0,.5*(1-r),0,0,r,0,.5*(1-r),0,0,0,1,0],t),M=(t,r)=>{let i,e=o.filters[r],s=t.filters||[],l=s.length;var n;for(e||(n=r+" not found. PixiPlugin.registerPIXI(PIXI)",console.warn(n));--l>-1;)if(s[l]instanceof e)return s[l];return i=new e,"BlurFilter"===r&&(i.blur=0),s.push(i),t.filters=s,i},A=(t,r,i,e)=>{r.add(i,t,i[t],e[t]),r._props.push(t)},I=(t,r)=>{let i=new o.filters.ColorMatrixFilter;return i.matrix=r,i.brightness(t,!0),i.matrix},F={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},_=(t,r,i)=>{let e,o,s,l=M(t,"ColorMatrixFilter"),n=t._gsColorMatrixFilter=t._gsColorMatrixFilter||(t=>{let r,i={};for(r in t)i[r]=t[r];return i})(F),a=r.combineCMF&&!("colorMatrixFilter"in r&&!r.colorMatrixFilter);s=l.matrix,r.resolution&&(l.resolution=r.resolution),r.matrix&&r.matrix.length===s.length?(o=r.matrix,1!==n.contrast&&A("contrast",i,n,F),n.hue&&A("hue",i,n,F),1!==n.brightness&&A("brightness",i,n,F),n.colorizeAmount&&(A("colorize",i,n,F),A("colorizeAmount",i,n,F)),1!==n.saturation&&A("saturation",i,n,F)):(o=g.slice(),null!=r.contrast?(o=z(o,+r.contrast),A("contrast",i,n,r)):1!==n.contrast&&(a?o=z(o,n.contrast):A("contrast",i,n,F)),null!=r.hue?(o=w(o,+r.hue),A("hue",i,n,r)):n.hue&&(a?o=w(o,n.hue):A("hue",i,n,F)),null!=r.brightness?(o=I(+r.brightness,o),A("brightness",i,n,r)):1!==n.brightness&&(a?o=I(n.brightness,o):A("brightness",i,n,F)),null!=r.colorize?(r.colorizeAmount="colorizeAmount"in r?+r.colorizeAmount:1,o=P(o,r.colorize,r.colorizeAmount),A("colorize",i,n,r),A("colorizeAmount",i,n,r)):n.colorizeAmount&&(a?o=P(o,n.colorize,n.colorizeAmount):(A("colorize",i,n,F),A("colorizeAmount",i,n,F))),null!=r.saturation?(o=m(o,+r.saturation),A("saturation",i,n,r)):1!==n.saturation&&(a?o=m(o,n.saturation):A("saturation",i,n,F))),e=o.length;for(;--e>-1;)o[e]!==s[e]&&i.add(s,e,s[e],o[e],"colorMatrixFilter");i._props.push("colorMatrixFilter")},y=(t,{t:r,p:i,color:e,set:o})=>{o(r,i,e[0]<<16|e[1]<<8|e[2])},C=(t,{g:r})=>{r&&(r.dirty++,r.clearDirty++)},X=(t,r)=>{r.t.visible=!!r.t.alpha},v=(t,r,e,o)=>{let n=t[r],a=i(p(n)?t[r.indexOf("set")||!p(t["get"+r.substr(3)])?r:"get"+r.substr(3)]():n),u=i(e);o._pt=new s(o._pt,t,r,0,0,y,{t:t,p:r,color:a,set:l(t,r)}),o.add(a,0,a[0],u[0]),o.add(a,1,a[1],u[1]),o.add(a,2,a[2],u[2])},O={tint:1,lineColor:1,fillColor:1},S="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),D={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},Y={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},j=Math.PI/180,k=t=>"string"==typeof t,B=t=>k(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*j:t*j,E=(t,r)=>r.set(r.t,r.p,1===t?r.e:Math.round(1e5*(r.s+r.c*t))/1e5,r),N=(t,r,i,e,o,l)=>{let n,a,u=360*(l?j:1),h=k(o),c=h&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0,p=parseFloat(c?o.substr(2):o)*(l?j:1),g=c?p*c:p-e,d=e+g;return h&&(n=o.split("_")[1],"short"===n&&(g%=u,g!==g%(u/2)&&(g+=g<0?u:-u)),"cw"===n&&g<0?g=(g+1e10*u)%u-~~(g/u)*u:"ccw"===n&&g>0&&(g=(g-1e10*u)%u-~~(g/u)*u)),t._pt=a=new s(t._pt,r,i,e,g,E),a.e=d,a},R=()=>{h()&&(r=window,t=c(),o=e=o||r.PIXI,n=o&&o.VERSION&&"4"===o.VERSION.charAt(0),i=r=>t.utils.splitColor("0x"===(r+"").substr(0,2)?"#"+r.substr(2):r))};for(a=0;a<S.length;a++)u=S[a],D[u+"X"]=u,D[u+"Y"]=u;const V={version:"3.9.0",name:"pixi",register(r,i,e){t=r,s=e,l=i.getSetter,R()},registerPIXI(t){o=t},init(t,r,i,e,l){if(o||R(),!(o&&t instanceof o.DisplayObject))return console.warn(t,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;let a,u,h,c,p,g,d,f,b;for(g in r){if(a=D[g],h=r[g],a)u=~g.charAt(g.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[a],u,t[a][u],"skew"===a?B(h):h);else if("scale"===g||"anchor"===g||"pivot"===g||"tileScale"===g)this.add(t[g],"x",t[g].x,h),this.add(t[g],"y",t[g].y,h);else if("rotation"===g||"angle"===g)N(this,t,g,t[g],h,"rotation"===g);else if(Y[g])c||(_(t,r.colorMatrixFilter||r,this),c=!0);else if("blur"===g||"blurX"===g||"blurY"===g||"blurPadding"===g){if(p=M(t,"BlurFilter"),this.add(p,g,p[g],h),0!==r.blurPadding)for(d=r.blurPadding||2*Math.max(p[g],h),f=t.filters.length;--f>-1;)t.filters[f].padding=Math.max(t.filters[f].padding,d)}else if(O[g])if(("lineColor"===g||"fillColor"===g)&&t instanceof o.Graphics)for(b=(t.geometry||t).graphicsData,this._pt=new s(this._pt,t,g,0,0,C,{g:t.geometry||t}),f=b.length;--f>-1;)v(n?b[f]:b[f][g.substr(0,4)+"Style"],n?g:"color",h,this);else v(t,g,h,this);else"autoAlpha"===g?(this._pt=new s(this._pt,t,"visible",0,0,X),this.add(t,"alpha",t.alpha,h),this._props.push("alpha","visible")):"resolution"!==g&&this.add(t,g,"get",h);this._props.push(g)}}};c()&&t.registerPlugin(V);export default V;export{V as PixiPlugin};
